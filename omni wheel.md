# オムニホイールの制御

## what's this file?
1年の間でオムニホイールに関する課題が出ているので、それについてなんとなく調べたことやら学んだことやらを綴る場所。

## オムニホイールってなに
足回り。四輪とか三輪とか。

## やりたいこと
PICでPWM制御してオムニホイールを動かしてみたい

## 問題点
- 知識が0()
- 具体的な詳細が決まっていない
- 未だやり遂げていないものがある
- 付加機能など

## 詳細（個人的なメモ）
- Arduinoからかきこみ
- PICからオムニへ
- PICとオムニの電源

## 調べ事のまとめ

### PWM制御とは
Pulse Width Modutation　の略。

オンとオフを繰りかえす高速スイッチングで、パルス波形を作り、HIGH時間を変化させて平均の出力電力を制御する。
方形波の周波数を固定し、HIGH時間の割合をduty比という。

モーターやLEDを制御するとき、リニア制御と比べて損失が少なく済む。

以下のようなグラフになる
（写真）

※リニア制御とは

可変抵抗によって電流の量を制御する。基本的な考え方らしい。

### PICとは
- マイコン。→特定用途の制御に用いる。
- プログラムを書き込めばやってくれる（）
- ピンっていう足みたいなのがある。ピン番号などはデータシートを見よう。

### 計算方法
0°から360°で方向を指定できるようにする。三角関数と行列を使って求める。

- 三輪の場合
![omniwheel](https://user-images.githubusercontent.com/110577719/205429261-13ed6148-9634-4ab5-b50d-7dfdfab57d17.png)

絶望的な図ですが我慢しましょう。

モーターとロボットのベクトルと速度の関係から、行列式を作ります。
そのためにそれぞれの速度に注目します。
  - V₁=x+0y+rθ
  - V₂=cos120°x+sin120°y+rθ
  - V₃=cos240°x+sin240°y+rθ

となるため、

  - V₁=x+0y+rθ
  - V₂=-1/2x+√3/2y+rθ
  - V₃=-1/2x-√3/2y+rθ

よって行列式に表すと、V（V₁,V₂,V₃）は、

<img src="https://user-images.githubusercontent.com/110577719/205446374-5e3ad1b5-2cf1-421d-bcba-a3bd75360972.png" width="25%">

 となります。

## 付加機能について
技術不足過ぎて今やるつもりはないですが書いておきます。
これあったらいいなーとぱっと思いついたもの
- バッテリーチェッカー（電源用）
- 障害物との距離測るやつ
- コントローラー使いたい（突然な欲望）

## やれるもんならやってみろ
全体でPWM制御を習ったとき、ほかの人に課題振って本読んでた（）ので、PWM制御したことがあまりないのです。
なので、twilight使って練習したい

シュミレーションやる（LTspice,webのやつ）

ちゃんと組む。部品探しやる。
